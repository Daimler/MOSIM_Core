# MMIStandard

This Visual Studio/CMake project generates a static libary, which contains the auto generated code of the thrift files of the MMI standard and the thrift framework

This project has following dependencies:
The autogenerated files in ..\..\thrift\gen-cpp
The header files of the thrift libary and the precompiled static libaries from the thrift framework in ..\vcpkg\installed\x64-windows\lib
The thrift libaries are already precompiled for Windows! If you use other platforms please compile it from source!

Changes are necessary in the autogenerated files in ..\..\thrift\gen-cpp.
If user defined objects are used in maps in thrift, C++ requires the "<" operator to be defined for comparing two objects of the type. 
Thrift does not know how to compare the objects, therefore it only declares, but does not define the required operator overloads.
The function bodies have to be inserted by hand.
The following changes are necessary: 

In "mmu_types.h" line 541: 
replace:
  bool operator < (const MMUDescription &MMUDesc) const;
with: 
  bool operator < (const MMUDescription &MMUDesc) const {
	int inID = stoi(MMUDesc.ID);
	int thisID = stoi(this->ID);
	if (inID < thisID)
	  return true;	
  }
  
In "math_types.h" line 261
replace:
  bool operator < (const MTransform &MTransform) const;
with:
  bool operator < (const MTransform &MTransform) const {
	  int inID = stoi(MTransform.ID);
	  int thisID = stoi(this->ID);
	  if (inID < thisID)
		  return true;
  }
  
These changes are only preliminary and might have to be adjusted in the future. 

They are necessary for the current MMIStandard (01.12.2020).
